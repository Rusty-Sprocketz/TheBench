# v2.8.1 — Fix Smoke Test False Failures Triggering Fixer

## Problem
Pipeline-deployed demo apps (especially Fortune Teller variants) were shipping broken because:

1. Fresh Vercel deployments return 404 on `/api/generate` for several seconds while the alias propagates
2. The 3-second smoke test wait was too short — the smoke test would see a 404 and declare failure
3. This triggered the fixer LLM, which "fixed" working code by introducing real bugs (e.g., changing `gemini-2.0-flash` to `gemini-2.0-flash-exp`)
4. The broken fixer output was then redeployed as the final app

## Fix
Added retry logic to the smoke test in `handleDeployer`:

- **3 attempts** with delays of 5s, 4s, 3s (total up to 12s vs previous 3s)
- 404 responses on non-final attempts are treated as retryable (alias propagation)
- Network errors on non-final attempts are also retried
- Only a definitive result (pass, real HTTP error, or response validation failure) stops the retry loop
- Prevents the fixer from being triggered by transient infrastructure timing issues

## Files Modified
- `api/pipeline.js` — Smoke test retry logic in `handleDeployer`
- `client/src/App.jsx` — Version bump
- `package.json` — Version bump
