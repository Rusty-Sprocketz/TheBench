# v2.2.1 â€” Smoke Test, Build Log Fix, Stronger Validation

**Released:** 2026-02-13

## Fixes

### Build log "How I Was Built" panel now works
- Root cause: The deployed app tried to fetch `build-log.json` but Vercel's SPA routing returned an HTML 404 page instead
- Fix: Build log data is now injected directly into `index.html` as `<script>window.__BUILD_LOG__={...}</script>` at deploy time
- Builder prompt updated to read `window.__BUILD_LOG__` instead of fetching a file
- No separate file to route, no fetch to fail

### Post-deploy smoke test
- After deployment is live, the deployer now sends a real HTTP request to the app's `/api/generate` endpoint
- Test payload is derived from the spec's `apiContract.requestBody` field names
- Result shown in the Deploy stage: "Smoke test passed" or "Smoke test failed"
- Catches broken APIs that the static code analysis missed

### Stronger Builder and Tester prompts
- Builder rule #15: Explicit instruction to verify fetch URL and field names match the apiContract exactly
- Tester now specifically checks: field name mismatches between frontend fetch body and backend response, correct `window.__BUILD_LOG__` usage, Gemini API initialization pattern
- Fixer also knows about `window.__BUILD_LOG__` and apiContract field matching
